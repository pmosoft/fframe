<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.pmosoft.fframe.syst.user.UserDao">

<select id="selectUserList" parameterType="java.util.HashMap" resultType="java.util.HashMap">

	-- UserDao.selectUserList
	SELECT   
	         USER_ID
			,USER_EMAIL
			,USER_PW
			,USER_NM
			,USER_AGE
			,USE_YN
			,date_format(REG_DT,'%Y.%m.%d %H:%i:%S') AS REG_DT
			,REG_USER_ID
			,date_format(UPD_DT,'%Y.%m.%d %H:%i:%S') AS UPD_DT
			,UPD_USER_ID 
	FROM   TSYUR0001
    WHERE 22=22 
    AND  (
          (#{searchKeyCombo} = 'USER_ID' AND USER_ID LIKE CONCAT(CONCAT('%',#{searchValue}),'%'))
	       OR   
	      (#{searchKeyCombo} = 'USER_NM' AND USER_NM LIKE CONCAT(CONCAT('%',#{searchValue}),'%'))
	     ) 
	ORDER BY USER_ID 		  	
</select>

<select id="selectUserCnt" parameterType="java.util.HashMap" resultType="int">
	-- UserDao.selectUserCnt
	SELECT COUNT(*) CNT 
	FROM   TSYUR0001
    WHERE  USER_ID = #{USER_ID}
</select>


<insert id="insertUser" parameterType="java.util.HashMap">

	-- UserDao.insertUser
	INSERT INTO TSYUR0001
	(
	     USER_ID
		,USER_EMAIL
		,USER_PW
		,USER_NM
		,USER_AGE
		,USE_YN
		,REG_DT
		,REG_USER_ID
		,UPD_DT
		,UPD_USER_ID
	) VALUES ( 
         #{USER_ID}
		,#{USER_EMAIL}
		,#{USER_PW}
		,#{USER_NM}
		,CAST(#{USER_AGE} AS INT)
		,CASE WHEN #{USE_YN} = 'true' THEN 'Y' ELSE 'N' END
		,curdate()
		,#{REG_USER_ID}
		,curdate()
		,#{UPD_USER_ID} 
	)
		  	
</insert>


<delete id="deleteUser" parameterType="java.util.HashMap">
	-- UserDao.deleteUser
	DELETE FROM TSYUR0001 WHERE USER_ID = #{USER_ID} 
</delete>
	
<update id="updateUser" parameterType="java.util.HashMap">
	
	-- UserDao.updateUser
	UPDATE TSYUR0001 
	SET  USER_ID     = #{USER_ID}            
		,USER_EMAIL  = #{USER_EMAIL}         
		,USER_PW     = #{USER_PW}            
		,USER_NM     = #{USER_NM}            
		,USER_AGE    = CAST(#{USER_AGE} AS INT)
		,USE_YN      = CASE WHEN #{USE_YN} = 'true' THEN 'Y' ELSE 'N' END
		,UPD_DT      = curdate()
		,UPD_USER_ID = #{UPD_USER_ID}
	WHERE  USER_ID = #{USER_ID}
	 
</update>

	
</mapper>
